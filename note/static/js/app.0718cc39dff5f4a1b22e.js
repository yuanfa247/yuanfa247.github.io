webpackJsonp([1],{"7ddX":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"g-container_view"},[e("router-view")],1)])},staticRenderFns:[]},i=a("VU/8")({name:"App"},n,!1,function(t){a("7ddX")},null,null).exports,o=a("/ocq"),r=a("mvHQ"),c=a.n(r),d=a("mtWM"),u=a.n(d),l={name:"msgItems",data:function(){return{msgInput:!1,newMsg:"",warnText:"请输入修改内容~！",warning:!1,isSuccess:!1,amendText:"修改成功",isBtnText:"修改数据"}},watch:{msgInput:function(t){t?this.isBtnText="确认修改":(this.warning=!1,this.isBtnText="修改数据")}},props:{msg:Object,placeholder:{type:String,default:"请输入修改内容"}},methods:{delData:function(){this.$emit("delete"),this.msgInput=!1},modifData:function(t){this.msgInput?this.newMsg?(this.warning=!1,this.affirm(t)):this.warning=!0:this.msgInput=!0},cancel:function(){this.msgInput=!1},affirm:function(t){this.$emit("amend",{_id:t._id,msg:this.newMsg,fnxx:this.success}),this.newMsg="",this.msgInput=!1},success:function(t){var e=this,a=null;this.amendText=t||"修改成功",this.isSuccess=!0,a&&clearTimeout(a),a=setTimeout(function(){e.isSuccess=!1},2e3)}},mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"massage"},[this.$slots.top?a("div",{staticClass:"top"},[t._t("top")],2):t._e(),t._v(" "),a("span",{staticClass:"massage_items"},[t._v("姓名："+t._s(t.msg.name))]),t._v(" "),a("span",{staticClass:"massage_items"},[t._v("留言："+t._s(t.msg.msg))]),t._v(" "),t.msgInput?a("div",{staticClass:"input_box"},[a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.newMsg,expression:"newMsg",modifiers:{trim:!0,lazy:!0}}],staticClass:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.newMsg},on:{change:function(e){t.newMsg=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.warning?a("p",{staticClass:"warnMsg"},[t._v(t._s(t.warnText))]):t._e()]):t._e(),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.isSuccess?a("p",{staticClass:"success",domProps:{textContent:t._s(t.amendText)}}):t._e()]),t._v(" "),a("p",{staticClass:"btn_list"},[t.msgInput?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.cancel}},[t._v("取消修改")]):t._e(),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"button"},domProps:{textContent:t._s(t.isBtnText)},on:{click:function(e){return t.modifData(t.msg)}}}),t._v(" "),a("button",{staticClass:"btn delBtn",attrs:{type:"button"},on:{click:t.delData}},[t._v("删除数据")])])],1)},staticRenderFns:[]},h=a("VU/8")(l,m,!1,function(t){a("tJNc")},"data-v-280aab2e",null).exports,p={name:"commitMsg",data:function(){return{userName:"",userMsg:"",warning:!1,warnMsg:"请输入信息",addPrompt:!1}},watch:{warning:function(t){}},methods:{addData:function(){this.$emit("addData",{name:this.userName,msg:this.userMsg}),this.succeed()},succeed:function(){var t=this;this.userName="",this.userMsg="",this.addPrompt=!0,setTimeout(function(){t.addPrompt=!1},2e3)},verifyInfos:function(){this.userName&&this.userMsg?(this.warning=!1,this.addData()):(this.warning=!0,this.userName?this.warnMsg="请输入留言":this.warnMsg="请输入用户名")}},mounted:function(){}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commit"},[a("p",{staticClass:"commit_items"},[a("label",{staticClass:"msg",attrs:{for:"note_use"}},[t._v("用户名：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.userName,expression:"userName",modifiers:{trim:!0,lazy:!0}}],staticClass:"input",attrs:{autocomplete:"off",id:"note_use",type:"text"},domProps:{value:t.userName},on:{change:function(e){t.userName=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("p",{staticClass:"commit_items"},[a("label",{staticClass:"msg",attrs:{for:"note_msg"}},[t._v("留言：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.userMsg,expression:"userMsg",modifiers:{trim:!0,lazy:!0}}],staticClass:"input",attrs:{id:"note_msg",type:"text",autocomplete:"off"},domProps:{value:t.userMsg},on:{change:function(e){t.userMsg=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),t.warning?a("p",{staticClass:"warning"},[t._v(t._s(t.warnMsg))]):t._e(),t._v(" "),a("h3",{staticClass:"btn_box"},[a("button",{staticClass:"btn",on:{click:t.verifyInfos}},[t._v("添加数据")]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.addPrompt?a("p",{staticClass:"add_data"},[t._v("添加数据成功")]):t._e()])],1)])},staticRenderFns:[]},v=a("VU/8")(p,f,!1,function(t){a("chQa")},"data-v-311c908a",null).exports,_={name:"node_search",data:function(){return{keyword:"",warn:!1,warnText:"请输入关键词来搜索"}},watch:{keyword:function(){this.$emit("inputSearch")}},props:{placeholder:{type:String,default:"请输入关键词"},search:{type:String,default:"点击搜索"}},methods:{handleSearch:function(){this.keyword?(this.warn=!1,this.$emit("searchData",this.keyword),this.keyword=""):this.warn=!0}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{search:!0,clearfix:!0,hasPadding:t.warn}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("input",{staticClass:"btn",attrs:{type:"button",value:t.search},on:{click:t.handleSearch}}),t._v(" "),t.warn?a("p",{staticClass:"warnMsg"},[t._v(t._s(t.warnText))]):t._e()])},staticRenderFns:[]},w=a("VU/8")(_,g,!1,function(t){a("W6rn")},"data-v-5e8835e4",null).exports,C=u.a.CancelToken,b={name:"hello",data:function(){return{msg:"node记事本",test1:"测试按钮",test2:"点击访问mongoDB数据",prompt:"呀，没有搜索到内容，换个词吧",dbData:[],addText:"第四条数据",source:"",addIsTure:!1,delIsTure:!1,addSource:"",noFind:!1,timer:null}},components:{vMsgItem:h,vCommit:v,vSearch:w},methods:{handleClick:function(t){var e="http://localhost:5346//test";void 0!==t&&void 0===t.type&&(e+="?id=1&text="+t),u.a.get(e,{timeout:1e4}).then(function(t){}).catch(function(t){})},handleMongoDB:function(){var t=this;u.a.get("http://localhost:5346//node_middle",{timeout:1e4}).then(function(e){t.dbData=e.data}).catch(function(t){})},addDBdata:function(t){var e=this;this.addIsTure&&this.addSource.cancel("已经取消请求了，2333！"),this.addIsTure=!0,this.addSource=C.source(),u.a.get("http://localhost:5346//insert_data",{timeout:1e4,cancelToken:this.addSource.token,params:t}).then(function(t){e.handleMongoDB(),e.addIsTure=!1}).catch(function(t){e.addIsTure=!1,u.a.isCancel(t)})},delDBdata:function(t){var e=this,a=t._id;if("string"!=typeof a)throw new Error("请输入字符串");this.delIsTure&&this.source.cancel("已经取消请求！"),this.delIsTure=!0,this.source=C.source(),u.a.get("http://localhost:5346//delete_data",{timeout:1e4,cancelToken:this.source.token,params:{_id:a}}).then(function(t){e.handleMongoDB(),e.delIsTure=!1}).catch(function(t){e.delIsTure=!1,u.a.isCancel(t)})},searchDB:function(t){var e=this;u.a.get("http://localhost:5346//node_search",{timeout:1e4,params:{name:t}}).then(function(t){"nofind"!==t.data?(e.dbData=t.data,e.noFind=!1,e.prompt="为你搜索到以下内容",e.noFind=!0):(e.prompt="呀，没有搜索到内容，换个词吧",e.noFind=!0,clearTimeout(e.timer),e.timer=setTimeout(function(){e.noFind=!1},2e3))}).catch(function(t){})},amendDBdata:function(t){var e=this;u.a.get("http://localhost:5346//node_amend",{timeout:1e4,params:t}).then(function(a){"ok"===a.data?(e.dbData.map(function(e){t._id===e._id&&(e.msg=t.msg)}),t.fnxx()):t.fnxx("修改失败请重试!")}).catch(function(e){t.fnxx("修改失败请重试!")})},startSearch:function(){this.noFind=!1}},created:function(){this.handleMongoDB()},beforeUpdate:function(){this.dbData=JSON.parse(c()(this.dbData))}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"note_wrap"},[a("div",{staticClass:"bg-box"},[a("div",{staticClass:"node_container"},[a("h1",{staticClass:"title"},[t._v(t._s(t.msg))]),t._v(" "),a("div",{staticClass:"note_btn_box"},[a("input",{staticClass:"btn",attrs:{type:"button",value:t.test1},on:{click:t.handleClick}}),t._v(" "),a("input",{staticClass:"btn",attrs:{type:"button",value:t.test2},on:{click:t.handleMongoDB}})]),t._v(" "),a("div",{staticClass:"search_box"},[a("v-search",{on:{inputSearch:t.startSearch,searchData:t.searchDB}}),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.noFind?a("div",{staticClass:"nofind",domProps:{textContent:t._s(t.prompt)}}):t._e()])],1)]),t._v(" "),a("div",{staticClass:"data"},[a("div",{staticClass:"commit_box"},[a("v-commit",{on:{addData:t.addDBdata}})],1),t._v(" "),t._l(t.dbData,function(e,s){return a("div",{key:s,staticClass:"data_items"},[a("v-MsgItem",{attrs:{msg:e},on:{delete:function(a){return t.delDBdata(e)},amend:t.amendDBdata}},[a("p",{attrs:{slot:"top"},slot:"top"},[t._v("第"+t._s(s+1)+"条留言")])])],1)})],2)])])},staticRenderFns:[]},y=a("VU/8")(b,x,!1,function(t){a("cIcr")},"data-v-596774f2",null).exports;s.a.use(o.a);var M=new o.a({routes:[{path:"/",name:"note",component:y}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:M,components:{App:i},template:"<App/>"})},W6rn:function(t,e){},cIcr:function(t,e){},chQa:function(t,e){},tJNc:function(t,e){}},["NHnr"]);